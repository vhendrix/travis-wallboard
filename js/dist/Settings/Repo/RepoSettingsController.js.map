{"version":3,"sources":["../../../src/Settings/Repo/RepoSettingsController.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,6BAA6B,CAAC,CAAC,UAAU,CACpD,wBAAwB,EACxB,CACI,QAAQ,EACR,YAAY,EACZ,wBAAwB,EACxB,KAAK,EACL,aAAa,EACb,UAAU,MAAM,EAAE,UAAU,EAAE,uBAAuB,EAAE,GAAG,EAAE,WAAW,EAAE;AACrE,UAAM,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;AAC3C,UAAM,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC;;AAExD,UAAM,CAAC,MAAM,GAAG,YAAY;AACxB,kBAAU,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAC1C,cAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACnC,kBAAU,CAAC,YAAY;AACnB,kBAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtC,EAAE,KAAK,CAAC,CAAC;KACb;;;;;AAAC,AAKF,UAAM,CAAC,SAAS,GAAG,YAAY;AAC3B,eAAO,CAAC,OAAO,CACX,UAAU,CAAC,IAAI,CAAC,KAAK,EACrB,UAAU,KAAK,EAAE;AACb,gBAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;AAC7B,oBAAI,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;AAC7G,wBAAQ,CAAC,QAAQ,CACb,UAAU,QAAQ,EAAE;AAChB,wBAAI,QAAQ,GAAG,uBAAuB,CAAC,uBAAuB,CAAC,QAAQ,CAAC,CAAC;;AAEzE,wBAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;;AAEtB,wBAAG,KAAK,CAAC,SAAS,EAAE;AAChB,4BAAI,IAAI,UAAU,CAAC;qBACtB;AACD,wBAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE;AACpC,8BAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;qBACjC;iBACJ,CACJ,CAAC;aACL;SACJ,CACJ,CAAC;KACL,CAAC;;AAEF,UAAM,CAAC,SAAS,EAAE,CAAC;CACtB,CACJ,CACJ,CAAC","file":"RepoSettingsController.js","sourcesContent":["angular.module('travisWallBoard.controllers').controller(\n    'RepoSettingsController',\n    [\n        '$scope',\n        'twsettings',\n        'TravisWallboardService',\n        'md5',\n        'TravisRepos',\n        function ($scope, twsettings, $travisWallboardService, md5, TravisRepos) {\n            $scope.users = twsettings.data.users || [];\n            $scope.repos = $scope.repos || twsettings.data.projects;\n\n            $scope.submit = function () {\n                twsettings.data.setProjects($scope.repos);\n                jQuery('#repo-success').show(1000);\n                setTimeout(function () {\n                    jQuery('#repo-success').hide(1000);\n                }, 10000);\n            };\n\n            /**\n             * Load initial repos from the travis service.\n             */\n            $scope.loadRepos = function () {\n                angular.forEach(\n                    twsettings.data.users,\n                    function ($user) {\n                        if (!helper.isEmpty($user.name)) {\n                            var resource = TravisRepos.resource($user.name, twsettings.data.getUri($user), $user.isPrivate, $user.token);\n                            resource.getRepos(\n                                function (response) {\n                                    var newRepos = $travisWallboardService.getProjectsFromResponse(response);\n\n                                    var name = $user.name;\n\n                                    if($user.isPrivate) {\n                                        name += ' private';\n                                    }\n                                    if (helper.isEmpty($scope.repos[name])) {\n                                        $scope.repos[name] = newRepos;\n                                    }\n                                }\n                            );\n                        }\n                    }\n                );\n            };\n\n            $scope.loadRepos();\n        }\n    ]\n);\n"]}